(this["webpackJsonpwheelsmart-admin-react"]=this["webpackJsonpwheelsmart-admin-react"]||[]).push([[41],{534:function(e,a,t){"use strict";t.d(a,"a",(function(){return h}));t(0);var i=t(521),c=t(531),n=t(519),s=t(154),r=t(51),o=t(43),l=t(8),d=t(216),u=t(3);function h(e){var a=Object(r.f)(),t=e.pageTitle,h=e.pageText,m=e.addModelTile,j=e.goBack,p=e.setIsModalVisible;return Object(u.jsx)(i.a,{span:24,children:Object(u.jsx)(c.a,{className:"hp-m-0",children:Object(u.jsxs)(n.a,{children:[Object(u.jsxs)(i.a,{span:18,children:[j&&Object(u.jsx)(o.b,{to:"#",onClick:function(){return a.goBack()},className:"action-icon text-primary  hp-mr-12 hp-d-inline-block",children:Object(u.jsx)(l.d,{className:"remix-icon",size:24})}),Object(u.jsxs)(n.a,{className:"hp-d-inline-block",children:[Object(u.jsx)(i.a,{span:24,children:t&&Object(u.jsx)("h2",{className:"hp-m-0",children:t})}),Object(u.jsx)(i.a,{span:24,children:h&&Object(u.jsx)("p",{className:"hp-mb-0 hp-p1-body",children:h})})]})]}),Object(u.jsx)(i.a,{span:6,children:m&&Object(u.jsx)(s.a,{className:"hp-float-right",type:"primary",onClick:function(){return p(!0)},block:!0,icon:Object(u.jsx)(l.b,{className:"remix-icon",size:22}),children:!d.isMobile&&m})})]})})})}},535:function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));var i=t(1),c=t(550),n=t(3);function s(e){var a=e.value,t=e.onChange,s=e.onBlur;return Object(n.jsx)(c.a,Object(i.a)(Object(i.a)({},e),{},{onChange:function(a){var i=a.target.value;(/^-?\d*(\.\d*)?$/.test(i)||""===i||"-"===i)&&t({key:e.name,value:i})},onBlur:e.onBlur&&function(){var t=a;"."!==a.charAt(a.length-1)&&"-"!==a||(t=a.slice(0,-1)),s({key:e.name,value:t.replace(/0*(\d+)/,"$1")})}}))}},536:function(e,a,t){"use strict";t.d(a,"a",(function(){return u}));t(0);var i=t(521),c=t(519),n=t(154),s=t(51),r=t(43),o=t(8),l=t(216),d=t(3);function u(e){var a=Object(s.f)(),t=e.pageTitle,u=e.pageText,h=e.goBack,m=e.addModelTile,j=e.addModelTile2,p=e.setIsModalVisible,b=e.setIsModalVisible2;return Object(d.jsx)(i.a,{span:24,className:"hp-mt-12",children:Object(d.jsxs)(c.a,{children:[Object(d.jsxs)(i.a,{span:16,xs:16,md:12,xl:16,children:[h&&Object(d.jsx)(r.b,{to:"#",onClick:function(){a.goBack()},className:"action-icon text-primary  hp-mr-12 hp-d-inline-block",children:Object(d.jsx)(o.d,{className:"remix-icon",size:24})}),Object(d.jsxs)(c.a,{className:"hp-d-inline-block",children:[Object(d.jsx)(i.a,{span:24,children:t&&Object(d.jsx)("h3",{className:"hp-mb-2 hp-mt-4",children:t})}),Object(d.jsx)(i.a,{span:24,children:u&&Object(d.jsx)("p",{className:"hp-mb-0 hp-p1-body",children:u})})]})]}),Object(d.jsx)(i.a,{span:8,xs:8,md:12,xl:8,children:Object(d.jsxs)("div",{className:"hp-float-right hp-d-inline-block",children:[m&&Object(d.jsx)("div",{className:"hp-pl-4 hp-d-inline-block",children:Object(d.jsx)(n.a,{className:"",type:"primary",onClick:function(){return p(!0)},icon:Object(d.jsx)(o.b,{className:"remix-icon",size:22}),children:!l.isMobile&&m})}),j&&Object(d.jsx)("div",{className:"hp-pl-4 hp-d-inline-block",children:Object(d.jsx)(n.a,{className:"hp-pr-12",type:"primary",onClick:function(){return b(!0)},icon:Object(d.jsx)(o.b,{className:"remix-icon",size:22}),children:!l.isMobile&&j})})]})})]})})}},706:function(e,a,t){"use strict";t.r(a);var i=t(1),c=t(0),n=t(538),s=t(550),r=t(519),o=t(521),l=t(154),d=t(531),u=t(337),h=t(340),m=t(539),j=t(676),p=t(32),b=t(235),O=(t(534),t(8)),x=t(536),f=t(76),v=t(19),g=t.n(v),k=t(15),w=t(10),P=(t(533),t(524)),S=t(526),N=t(215),C=t(535),E=t(3);var y=Object(p.b)((function(e){var a=e.reEstimation,t=e.mini;return{rowdata:a.rowdata,model:a.model,miniCountersList:t.miniCountersList,purchaseStockList:t.purchaseStockList,purchaseStockParams:t.purchaseStockParams,rowDataView:a.rowDataView}}),{reEstimationAdd:f.i,isModelVisible:f.h,InputChangeValue:f.a,getMiniCounters:k.v,getPurchaseStock:k.jb,setPurchaseStockParams:k.ec})((function(e){var a,t,n,d,u,h,m,j=P.a.useForm(),p=Object(w.a)(j,1)[0];var b=function(){e.isModelVisible(!1)};Object(c.useEffect)((function(){e.getMiniCounters()}),[]);var x=function(){return null==e.rowdata.id||0==e.rowdata.id?Object(E.jsx)(c.Fragment,{children:Object(E.jsx)(l.a,{onClick:function(){p.submit()},type:"primary",block:!0,children:"Add"})}):Object(E.jsx)(c.Fragment,{children:Object(E.jsx)(l.a,{type:"primary",onClick:function(){p.submit()},block:!0,children:"Update"})})},f=function(){return Object(E.jsx)(c.Fragment,{children:Object(E.jsx)(l.a,{onClick:function(){b()},type:"primary",block:!0,ghost:!0,children:"Cancel"})})},v=Object(E.jsxs)("h5",{className:"modal-title",children:[null==e.rowdata.id||0==e.rowdata.id?"Add":"Update"," ","Re-Estimation"]});return Object(c.useEffect)((function(){p.setFieldsValue({counter_id:e.rowdata.counter_id,purchase_id:e.rowdata.purchase_id,amount:e.rowdata.amount,description:e.rowdata.description})}),[e.rowdata]),Object(E.jsx)(S.a,{visible:e.model,title:v,onCancel:function(){b(),p.resetFields(),e.isModelVisible(!1)},className:"hp-modal-p-24",footer:Object(E.jsxs)(r.a,{justify:"center",children:[Object(E.jsx)(o.a,{span:12,className:"hp-pr-4",children:Object(E.jsx)(f,{})}),Object(E.jsx)(o.a,{span:12,className:"hp-pl-4",children:Object(E.jsx)(x,{})})]}),centered:!0,closeIcon:Object(E.jsx)(O.k,{className:"remix-icon text-color-black-100",size:24}),width:616,children:Object(E.jsx)(P.a,{layout:"vertical",form:p,name:"userForm",autoComplete:"off",onFinish:function(){null==e.rowdata.id?function(){var a,t={id:0,amount:null===(a=e.rowdata)||void 0===a?void 0:a.amount,description:e.rowdata.description,counter_id:e.rowdata.counter_id,purchase_id:e.rowdata.purchase_id};e.reEstimationAdd(t)}():function(){var a,t,i,c,n,s,r,o={id:null===(a=e.rowdata)||void 0===a?void 0:a.id,amount:null===(t=e.rowdata)||void 0===t?void 0:t.amount,description:null===(i=e.rowdata)||void 0===i?void 0:i.description,counter_id:null==(null===(c=e.rowdata)||void 0===c?void 0:c.counter_id)?e.rowdata.counter.id:null===(n=e.rowdata)||void 0===n?void 0:n.counter_id,purchase_id:null==(null===(s=e.rowdata)||void 0===s?void 0:s.purchase_id)?e.rowdata.purchase.id:null===(r=e.rowdata)||void 0===r?void 0:r.purchase_id};e.reEstimationAdd(o)}()},children:Object(E.jsxs)(r.a,{gutter:[12,0],children:[Object(E.jsx)(o.a,{span:24,xs:24,xl:12,md:12,children:Object(E.jsx)(P.a.Item,{label:"Counter",name:"counter_id",rules:[{required:!0,message:"Please Select Counter"}],hasFeedback:!0,children:Object(E.jsx)(N.a,{showSearch:!0,placeholder:"Select a counter",optionFilterProp:"counter",filterOption:function(e,a){return a.children.toLowerCase().includes(e.toLowerCase())},onBlur:function(a){e.getPurchaseStock(Object(i.a)(Object(i.a)({},e.purchaseStockParams),{},{counter:e.rowdata.counter_id,page:1})),e.setPurchaseStockParams(Object(i.a)(Object(i.a)({},e.purchaseStockParams),{},{counter:e.rowdata.counter_id,page:1}))},onChange:function(a){e.InputChangeValue({key:"counter_id",value:a})},value:null==e.rowdata.counter_id?"":null===(a=e.rowdata)||void 0===a?void 0:a.counter_id,children:e.miniCountersList.map((function(e,a){return Object(E.jsx)(Option,{value:e.id,children:e.name},a)}))})})}),Object(E.jsx)(o.a,{span:24,xs:24,xl:12,md:12,children:null==e.rowdata.id?Object(E.jsx)(P.a.Item,{label:"Purchase",name:"purchase_id",rules:[{required:!0,message:"Please Select Purchase"}],hasFeedback:!0,children:Object(E.jsx)(N.a,{showSearch:!0,placeholder:"Select a Purchase",optionFilterProp:"Purchase",filterOption:function(e,a){return(a.children+"").toLowerCase().includes(e.toLowerCase())},disabled:null!=e.rowdata.id,onSearch:function(a){e.setPurchaseStockParams(Object(i.a)(Object(i.a)({},e.purchaseStockParams),{},{page:1,search:a})),e.getPurchaseStock(Object(i.a)(Object(i.a)({},e.purchaseStockParams),{},{page:1,search:a}))},onChange:function(a){e.InputChangeValue({key:"purchase_id",value:a})},value:null==e.rowdata.purchase_id?"":null===(t=e.rowdata)||void 0===t?void 0:t.purchase_id,onPopupScroll:function(){e.purchaseStockParams.page<e.purchaseStockParams.no_of_pages&&(e.setPurchaseStockParams(Object(i.a)(Object(i.a)({},e.purchaseStockParams),{},{page:e.purchaseStockParams.page+1})),e.getPurchaseStock(Object(i.a)(Object(i.a)({},e.purchaseStockParams),{},{page:e.purchaseStockParams.page+1})))},children:e.purchaseStockList.map((function(e,a){var t;return Object(E.jsxs)(Option,{value:e.id,children:[null===(t=e.vehicle)||void 0===t?void 0:t.vehicleno," - ",e.code]},a)}))})}):Object(E.jsx)(P.a.Item,{label:"Purchase",children:Object(E.jsx)(s.a,{id:"purchase_id",name:"purchase_id",style:{width:"100%"},value:null===(n=e.rowDataView)||void 0===n||null===(d=n.purchase)||void 0===d?void 0:d.code,disabled:!0})})}),Object(E.jsx)(o.a,{span:24,xs:24,xl:12,md:12,children:Object(E.jsx)(P.a.Item,{label:"Amount :",name:"amount",rules:[{required:!0,message:"Please input your Amount!"}],getValueProps:function(){},hasFeedback:!0,children:Object(E.jsx)(C.a,{id:"amount",name:"amount",style:{width:"100%"},placeholder:"Amount",maxLength:6,onBlur:function(a){var t;t=a,parseInt(t.value)>0&&parseInt(t.value)<=99&&(e.InputChangeValue({key:t.key,value:""}),S.a.error({icon:Object(E.jsx)("span",{className:"remix-icon",children:Object(E.jsx)(O.o,{})}),title:Object(E.jsx)("h5",{className:"hp-mb-0 hp-font-weight-500",children:"Amount Validation"}),content:Object(E.jsx)("div",{children:Object(E.jsx)("p",{className:"hp-p1-body hp-text-color-black-80",children:"Amount must be minimum 3 Digits"})})}))},value:null==(null===(u=e.rowdata)||void 0===u?void 0:u.amount)?"":null===(h=e.rowdata)||void 0===h?void 0:h.amount,onChange:e.InputChangeValue})})}),Object(E.jsx)(o.a,{md:24,xs:24,children:Object(E.jsx)(P.a.Item,{label:"Description :",name:"description",children:Object(E.jsx)(s.a.TextArea,{id:"description",name:"description",style:{width:"100%"},placeholder:"Description",value:null===(m=e.rowdata)||void 0===m?void 0:m.description,onChange:function(a){e.InputChangeValue({key:a.target.name,value:a.target.value})}})})})]})})})})),_=t(216);a.default=Object(p.b)((function(e){var a=e.reEstimation,t=e.mini,i=e.system;return{reEstimationList:a.reEstimationList,noofpages:a.noofpages,listCount:a.listCount,reEstimationParams:a.reEstimationParams,loading:a.loading,userAccessList:i.userAccessList,purchaseStockParams:t.purchaseStockParams}}),{getReEstimation:f.f,getReEstimationByID:f.g,reEstimationDelete:f.l,isModelVisible:f.h,SetreEstimationParams:f.b,getPurchaseStock:k.jb,setPurchaseStockParams:k.ec,clearREAmountList:f.d})((function(e){var a,t,p;Object(c.useEffect)((function(){e.getReEstimation({page:1,search:"",page_size:10})}),[]);var f="hp-p1-body hp-text-color-black-50 hp-text-color-dark-0 hp-font-weight-500 ",v=[{title:"S.No",dataIndex:"index",width:70,fixed:_.isMobile?null:"left"},{title:"Code",dataIndex:"code",filterSearch:!0,width:100,fixed:_.isMobile?null:"left"},{title:"Date",render:function(e){return Object(E.jsx)("span",{className:f,children:g()(e.createdon).format("DD-MM-YYYY")})},filterMode:"tree",filterSearch:!0,width:100},{title:"Counter",render:function(e){var a;return Object(E.jsx)("span",{className:f,children:null===(a=e.counter)||void 0===a?void 0:a.name})},filterMode:"tree",filterSearch:!0,width:100},{title:"Vehicle Number",render:function(e){var a,t;return Object(E.jsx)("span",{className:f,children:null===(a=e.purchase)||void 0===a||null===(t=a.vehicle)||void 0===t?void 0:t.vehicleno})},filterMode:"tree",filterSearch:!0,width:100},{title:"Purchase",render:function(e){var a;return Object(E.jsx)("span",{className:f,children:null===(a=e.purchase)||void 0===a?void 0:a.code})},filterMode:"tree",filterSearch:!0,width:100},{title:"Amount",render:function(e){return Object(E.jsx)("span",{className:f,children:e.amount})},filterMode:"tree",filterSearch:!0,width:100},{title:"Description",render:function(e){return Object(E.jsx)("span",{className:f,children:e.description})},filterMode:"tree",filterSearch:!0,width:100},{title:"Actions",key:"action",width:100,fixed:_.isMobile?null:"right",render:function(a,t){var c,s;return Object(E.jsxs)(m.b,{size:"middle",children:[-1!==(null===(c=e.userAccessList)||void 0===c?void 0:c.indexOf("StockTransfer.change_reestimatonamount"))&&Object(E.jsx)("i",{className:"ri-edit-box-line hp-mr-2 ",style:{cursor:"pointer",color:"#fc6f03"},onClick:function(){e.getPurchaseStock(Object(i.a)(Object(i.a)({},e.purchaseStockParams),{},{page:1})),e.setPurchaseStockParams(Object(i.a)(Object(i.a)({},e.purchaseStockParams),{},{page:1})),e.getReEstimationByID(a.id),e.isModelVisible(!0)}}),-1!==(null===(s=e.userAccessList)||void 0===s?void 0:s.indexOf("StockTransfer.delete_reestimatonamount"))&&Object(E.jsx)(n.a,{placement:"topRight",title:"Are you sure to delete this Record?",onConfirm:function(){return e.reEstimationDelete(t.id)},okText:"Yes",cancelText:"No",className:"hp-ml-8",icon:Object(E.jsx)(O.n,{className:"remix-icon hp-text-color-primary-1"}),children:Object(E.jsx)("i",{className:"ri-delete-bin-2-line ",style:{cursor:"pointer",color:"#ff0000"}})})]})}}],k=s.a.Search,w=e.reEstimationList.map((function(a,t){return Object(i.a)(Object(i.a)({},a),{},{index:(e.reEstimationParams.page-1)*e.reEstimationParams.page_size+t+1})}));return Object(E.jsxs)(r.a,{gutter:[12,12],children:[Object(E.jsx)(x.a,{pageTitle:"Re-Estimation"}),Object(E.jsx)(o.a,{span:24,children:Object(E.jsxs)(r.a,{gutter:[12,12],className:"hp-ecommerce-app-header ",children:[Object(E.jsx)(o.a,{span:24,xs:24,sm:24,md:14,className:"hp-ecommerce-app-header-search ",children:Object(E.jsx)(k,{placeholder:"Search...",allowClear:!0,onChange:function(a){""==a.target.value&&(e.getReEstimation(Object(i.a)(Object(i.a)({},e.reEstimationParams),{},{page:1,search:""})),e.SetreEstimationParams(Object(i.a)(Object(i.a)({},e.reEstimationParams),{},{page:1,search:""})))},onSearch:function(a){var t;t=a,e.SetreEstimationParams(Object(i.a)(Object(i.a)({},e.reEstimationParams),{},{search:t})),e.getReEstimation(Object(i.a)(Object(i.a)({},e.reEstimationParams),{},{search:t}))}})}),-1!==(null===(a=e.userAccessList)||void 0===a?void 0:a.indexOf("StockTransfer.add_reestimatonamount"))&&Object(E.jsx)(o.a,{span:24,xs:8,sm:8,md:6,children:Object(E.jsx)(l.a,{onClick:function(){e.isModelVisible(!0)},className:"hp-w-100 hp-p-12",icon:Object(E.jsx)(b.a,{className:"hp-mr-10"}),children:!_.isMobile&&"Add Re-Estimation"})})]})}),Object(E.jsx)(o.a,{span:24,children:Object(E.jsx)(d.a,{children:Object(E.jsxs)(r.a,{className:"hp-mb-12",children:[Object(E.jsx)(o.a,{span:24,children:Object(E.jsx)(u.a,{tip:"Loading...",spinning:e.loading,delay:500,children:Object(E.jsx)(j.a,{columns:v,dataSource:w,scroll:{x:1300},pagination:!1,size:"middle"})})}),Object(E.jsx)(o.a,{span:24,children:Object(E.jsx)(h.a,{size:"small",current:null===(t=e.reEstimationParams)||void 0===t?void 0:t.page,pageSize:null===(p=e.reEstimationParams)||void 0===p?void 0:p.page_size,total:e.listCount,showTotal:function(e){return"Total "+e+" items"},showSizeChanger:!0,onChange:function(a,t){e.clearREAmountList(),e.SetreEstimationParams(Object(i.a)(Object(i.a)({},e.reEstimationParams),{},{page_size:t,page:0==a?1:a})),e.getReEstimation(Object(i.a)(Object(i.a)({},e.reEstimationParams),{},{page_size:t,page:0==a?1:a}))},className:"hp-mb-12 hp-mt-24 hp-float-right"})})]})})}),Object(E.jsx)(y,{})]})}))}}]);
//# sourceMappingURL=41.6c96fbe6.chunk.js.map