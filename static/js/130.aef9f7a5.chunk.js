(this["webpackJsonpwheelsmart-admin-react"]=this["webpackJsonpwheelsmart-admin-react"]||[]).push([[130],{534:function(e,a,t){"use strict";t.d(a,"a",(function(){return p}));t(0);var r=t(521),n=t(531),i=t(519),s=t(154),l=t(51),o=t(43),c=t(8),u=t(216),d=t(3);function p(e){var a=Object(l.f)(),t=e.pageTitle,p=e.pageText,m=e.addModelTile,h=e.goBack,j=e.setIsModalVisible;return Object(d.jsx)(r.a,{span:24,children:Object(d.jsx)(n.a,{className:"hp-m-0",children:Object(d.jsxs)(i.a,{children:[Object(d.jsxs)(r.a,{span:18,children:[h&&Object(d.jsx)(o.b,{to:"#",onClick:function(){return a.goBack()},className:"action-icon text-primary  hp-mr-12 hp-d-inline-block",children:Object(d.jsx)(c.d,{className:"remix-icon",size:24})}),Object(d.jsxs)(i.a,{className:"hp-d-inline-block",children:[Object(d.jsx)(r.a,{span:24,children:t&&Object(d.jsx)("h2",{className:"hp-m-0",children:t})}),Object(d.jsx)(r.a,{span:24,children:p&&Object(d.jsx)("p",{className:"hp-mb-0 hp-p1-body",children:p})})]})]}),Object(d.jsx)(r.a,{span:6,children:m&&Object(d.jsx)(s.a,{className:"hp-float-right",type:"primary",onClick:function(){return j(!0)},block:!0,icon:Object(d.jsx)(c.b,{className:"remix-icon",size:22}),children:!u.isMobile&&m})})]})})})}},537:function(e,a,t){"use strict";a.a=t.p+"static/media/empty-list.6fd5c5d1.svg"},662:function(e,a,t){"use strict";t.r(a);var r=t(25),n=t(1),i=t(10),s=t(0),l=t(524),o=t(519),c=t(521),u=t(531),d=t(677),p=t(215),m=t(556),h=t(154),j=t(202),b=t(676),v=t(32),O=t(19),x=t.n(O),f=t(534),g=t(15),D=t(63),C=t(60),P=t(537),_=t(183),w=t(3),M=["file_format"],y=["file_format"];a.default=Object(v.b)((function(e){var a=e.reports,t=e.mini,r=e.person,n=e.vehicles;return{modelName:a.modelName,reportParamsData:a.reportParamsData,reportDataList:a.reportDataList,loading:a.loading,columnsList:a.columnsList,reportView:a.reportView,miniCountersList:t.miniCountersList,miniClustersList:t.miniClustersList,miniDivisionsList:t.miniDivisionsList,miniZonesList:t.miniZonesList,miniColorsList:t.miniColorsList,personParams:r.personParams,personlist:r.personlist,miniVehiclesList:t.miniVehiclesList,vehiclesParams:n.vehiclesParams}}),{InputChangeValue:_.a,getReportList:_.f,clearData:_.d,getMiniCounters:g.v,getMiniClusters:g.s,getMiniDivisions:g.A,getMiniZones:g.eb,getMiniColors:g.u,getMiniVehicles:g.Y,getPerson:D.j,SetPersonParams:D.c,SetVehiclesParams:C.c,getVehicles:C.h,getMiniZonesClearData:g.fb,getMiniClustersClearData:g.t,getMiniDivisionsClearData:g.B,getMiniCountersClearData:g.w})((function(e){var a,t,v,O,g,D,C,_,L,Y,S,V=l.a.useForm(),I=Object(i.a)(V,1)[0];function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{startDate:!1,endDate:!1},a=e.startDate,t=e.endDate;return function(e){var r=!0,n=!0;return a&&(r=e&&e<x()(a+" 00:00:01","YYYY-MM-DD HH:mm:ss")),t&&(n=e&&e>x()(x()(t).format("YYYY-MM-DD")+" 23:59:59","YYYY-MM-DD HH:mm:ss")),a&&r||t&&n}}Object(s.useEffect)((function(){e.clearData(),e.getMiniZones(),e.getMiniCounters(),e.getMiniClusters(),e.getMiniDivisions(),e.getMiniColors(),e.getPerson(Object(n.a)(Object(n.a)({},e.personParams),{},{page:1})),e.getMiniVehicles()}),[]);var F=e.columnsList.map((function(e){return{title:e,dataIndex:e}}));F.unshift({title:"S.No",dataIndex:"index"});var N=e.reportDataList.map((function(e,a){return Object(n.a)(Object(n.a)({},e),{},{index:a+1})}));return Object(s.useEffect)((function(){var a,t,r,n,i,s,l,o,c,u,d,p;I.setFieldsValue({start_date:null===(a=e.reportParamsData)||void 0===a?void 0:a.start_date,end_date:null===(t=e.reportParamsData)||void 0===t?void 0:t.end_date,file_format:null===(r=e.reportParamsData)||void 0===r?void 0:r.file_format,color:null===(n=e.reportParamsData)||void 0===n?void 0:n.color,customer:null===(i=e.reportParamsData)||void 0===i?void 0:i.customer,counter__zone:null===(s=e.reportParamsData)||void 0===s?void 0:s.counter__zone,counter__division:null===(l=e.reportParamsData)||void 0===l?void 0:l.counter__division,counter__cluster:null===(o=e.reportParamsData)||void 0===o?void 0:o.counter__cluster,counter:null===(c=e.reportParamsData)||void 0===c?void 0:c.counter,vehicle:null===(u=e.reportParamsData)||void 0===u?void 0:u.vehicle,partytype:null===(d=e.reportParamsData)||void 0===d?void 0:d.partytype,approvalstatus:null===(p=e.reportParamsData)||void 0===p?void 0:p.approvalstatus})}),[e.reportParamsData]),Object(w.jsxs)(o.a,{gutter:[12,12],className:"hp-mt-32",children:[Object(w.jsx)(f.a,{pageTitle:"Purchase Report",goBack:!0}),Object(w.jsx)(c.a,{span:24,children:Object(w.jsx)(u.a,{children:Object(w.jsxs)(l.a,{form:I,layout:"vertical",name:"basic",initialValues:{remember:!0},onFinish:function(){if("HRMS"==e.reportParamsData.file_format)var a=e.reportParamsData,t=a.file_format,i=Object(r.a)(a,M),s={file_format:2,model_name:"HRMS Daily Attendance"};else{var l=e.reportParamsData;t=l.file_format,i=Object(r.a)(l,y),s={file_format:t,model_name:"Purchase"}}e.getReportList({objData:s,ParamsData:Object(n.a)(Object(n.a)({},i),{},{start_date:null!=i.start_date?x()(i.start_date).format("YYYY-MM-DD"):"",end_date:null!=i.end_date?x()(i.end_date).add(1,"days").format("YYYY-MM-DD"):""})})},children:[Object(w.jsxs)(o.a,{gutter:[12,12],children:[Object(w.jsx)(c.a,{span:24,xs:24,md:8,xl:6,children:Object(w.jsx)(l.a.Item,{label:"From Date",name:"start_date",rules:[{required:!0,message:"Please select Your From Date!"}],children:Object(w.jsx)(d.a,{style:{width:"100%"},picker:"date",placeholder:"Choose Date",format:"DD-MM-YYYY",disabledDate:k({endDate:x()()}),onChange:function(a){e.InputChangeValue({key:"start_date",value:null==a?"":a}),null==a&&e.InputChangeValue({key:"end_date",value:""})}})})}),Object(w.jsx)(c.a,{span:24,xs:24,md:8,xl:6,children:Object(w.jsx)(l.a.Item,{label:"To Date",name:"end_date",rules:[{required:!0,message:"Please select Your To Date!"}],children:Object(w.jsx)(d.a,{style:{width:"100%"},picker:"date",placeholder:"Choose Date",format:"DD-MM-YYYY",disabledDate:k({endDate:x()().format("YYYY-MM-DD"),startDate:x()(null===(a=e.reportParamsData)||void 0===a?void 0:a.start_date).format("YYYY-MM-DD")}),disabled:null==e.reportParamsData.start_date||""==e.reportParamsData.start_date,onChange:function(a){e.InputChangeValue({key:"end_date",value:null==a?"":a})}})})}),Object(w.jsx)(c.a,{span:24,xs:24,md:8,xl:6,children:Object(w.jsx)(l.a.Item,{label:"Color",name:"color",children:Object(w.jsx)(p.a,{showSearch:!0,allowClear:!0,placeholder:"Select a Color",optionFilterProp:"Color",filterOption:function(e,a){return a.children.toLowerCase().includes(e.toLowerCase())},onChange:function(a){e.InputChangeValue({key:"color",value:a})},value:null==e.reportParamsData.color_id?"":null===(t=e.reportParamsData)||void 0===t?void 0:t.color_id,children:e.miniColorsList.map((function(e,a){return Object(w.jsx)(Option,{value:e.id,children:e.name},a)}))})})}),Object(w.jsx)(c.a,{span:24,xs:24,md:8,xl:6,children:Object(w.jsx)(l.a.Item,{label:"Customer",name:"customer",children:Object(w.jsx)(p.a,{showSearch:!0,allowClear:!0,placeholder:"Select Customer",optionFilterProp:"customer_id",onSearch:function(a){e.SetPersonParams(Object(n.a)(Object(n.a)({},e.personParams),{},{page:1,search:a})),e.getPerson(Object(n.a)(Object(n.a)({},e.personParams),{},{page:1,search:a}))},defaultActiveFirstOption:!1,showArrow:!0,filterOption:!1,onChange:function(a){e.InputChangeValue({key:"customer",value:a})},onPopupScroll:function(){e.personParams.page<e.personParams.no_of_pages&&(e.SetPersonParams(Object(n.a)(Object(n.a)({},e.personParams),{},{page:e.personParams.page+1})),e.getPerson(Object(n.a)(Object(n.a)({},e.personParams),{},{page:e.personParams.page+1})))},value:null==e.reportParamsData.customer_id?"":null===(v=e.reportParamsData)||void 0===v?void 0:v.customer_id,children:e.personlist.map((function(e,a){return Object(w.jsxs)(Option,{value:e.id,children:[e.firstname," ",e.lastname," - ",e.mobile]})}))})})}),Object(w.jsx)(c.a,{span:24,xs:24,md:8,xl:6,children:Object(w.jsx)(l.a.Item,{label:"Zone Name :",name:"counter__zone",children:Object(w.jsx)(p.a,{showSearch:!0,allowClear:!0,placeholder:"Select  Zone",optionFilterProp:"children",filterOption:function(e,a){return a.children.toLowerCase().includes(e.toLowerCase())},onChange:function(a){e.getMiniDivisions({zone:a}),e.getMiniDivisionsClearData(),e.getMiniClustersClearData(),e.getMiniCountersClearData(),e.InputChangeValue({key:"counter__zone",value:a})},value:null==e.reportParamsData.zone_id?"":null===(O=e.reportParamsData)||void 0===O?void 0:O.zone_id,children:e.miniZonesList.map((function(e,a){return Object(w.jsx)(Option,{value:e.id,children:e.name},a)}))})})}),Object(w.jsx)(c.a,{span:24,xs:24,md:8,xl:6,children:Object(w.jsx)(l.a.Item,{label:"Division Name:",name:"counter__division",children:Object(w.jsx)(p.a,{showSearch:!0,allowClear:!0,placeholder:"Select  Division",optionFilterProp:"division",filterOption:function(e,a){return a.children.toLowerCase().includes(e.toLowerCase())},onChange:function(a){e.getMiniClusters({division:a}),e.getMiniClustersClearData(),e.getMiniCountersClearData(),e.InputChangeValue({key:"counter__division",value:a})},value:null==e.reportParamsData.division_id?"":null===(g=e.reportParamsData)||void 0===g?void 0:g.division_id,children:e.miniDivisionsList.map((function(e,a){return Object(w.jsx)(Option,{value:e.id,children:e.name},a)}))})})}),Object(w.jsx)(c.a,{span:24,xs:24,md:8,xl:6,children:Object(w.jsx)(l.a.Item,{label:"Cluster Name:",name:"counter__cluster",children:Object(w.jsx)(p.a,{showSearch:!0,allowClear:!0,placeholder:"Select Cluster",optionFilterProp:"cluster",filterOption:function(e,a){return a.children.toLowerCase().includes(e.toLowerCase())},onChange:function(a){e.getMiniCounters({cluster:a}),e.getMiniCountersClearData({}),e.InputChangeValue({key:"counter__cluster",value:a})},value:null==e.reportParamsData.cluster_id?"":null===(D=e.reportParamsData)||void 0===D?void 0:D.cluster_id,children:e.miniClustersList.map((function(e,a){return Object(w.jsx)(Option,{value:e.id,children:e.name},a)}))})})}),Object(w.jsx)(c.a,{span:24,xs:24,md:8,xl:6,children:Object(w.jsx)(l.a.Item,{label:"Counter",name:"counter",children:Object(w.jsx)(p.a,{showSearch:!0,allowClear:!0,placeholder:"Select a Counter",optionFilterProp:"counter",filterOption:function(e,a){return a.children.toLowerCase().includes(e.toLowerCase())},onChange:function(a){e.InputChangeValue({key:"counter",value:a})},value:null==e.reportParamsData.counter_id?"":null===(C=e.reportParamsData)||void 0===C?void 0:C.counter_id,children:e.miniCountersList.map((function(e,a){return Object(w.jsx)(Option,{value:e.id,children:e.name},a)}))})})}),Object(w.jsx)(c.a,{span:24,xs:24,md:8,xl:6,children:Object(w.jsx)(l.a.Item,{label:"Approval Status",name:"approvalstatus",children:Object(w.jsx)(p.a,{showSearch:!0,allowClear:!0,placeholder:"Select Approval Status",optionFilterProp:"approvalstatus",filterOption:function(e,a){return a.children.toLowerCase().includes(e.toLowerCase())},onChange:function(a){e.InputChangeValue({key:"approvalstatus",value:a})},value:null==e.reportParamsData.approvalstatus?"":null===(_=e.reportParamsData)||void 0===_?void 0:_.approvalstatus,children:[{id:1,name:"Pending"},{id:2,name:"Approved"},{id:3,name:"Reject"}].map((function(e,a){return Object(w.jsx)(Option,{value:e.id,children:e.name},a)}))})})}),Object(w.jsx)(c.a,{span:24,xs:24,md:8,xl:6,children:Object(w.jsx)(l.a.Item,{label:"Purchase Type",name:"partytype",children:Object(w.jsx)(p.a,{showSearch:!0,allowClear:!0,placeholder:"Select a Purchase Type",optionFilterProp:"partytype",filterOption:function(e,a){return a.children.toLowerCase().includes(e.toLowerCase())},onChange:function(a){e.InputChangeValue({key:"partytype",value:a})},value:null==e.reportParamsData.partytype?"":null===(L=e.reportParamsData)||void 0===L?void 0:L.partytype,children:[{id:1,name:"Customer"},{id:2,name:"Dealer"},{id:3,name:"Exchange"},{id:4,name:"Seizing"},{id:5,name:"Return"}].map((function(e,a){return Object(w.jsx)(Option,{value:e.id,children:e.name})}))})})}),Object(w.jsx)(c.a,{span:24,xs:24,md:8,xl:6,children:Object(w.jsx)(l.a.Item,{label:"Vehicle",name:"vehicle",children:Object(w.jsx)(p.a,{showSearch:!0,allowClear:!0,placeholder:"Select Vehicle",optionFilterProp:"vehicle_id",filterOption:function(e,a){return a.children.toLowerCase().includes(e.toLowerCase())},onSearch:function(a){e.SetVehiclesParams(Object(n.a)(Object(n.a)({},e.vehiclesParams),{},{page:1,search:a})),e.getVehicles(Object(n.a)(Object(n.a)({},e.vehiclesParams),{},{page:1,search:a}))},defaultActiveFirstOption:!1,showArrow:!0,onChange:function(a){e.InputChangeValue({key:"vehicle",value:a})},onPopupScroll:function(){e.vehiclesParams.page<e.vehiclesParams.no_of_pages&&(e.SetVehiclesParams(Object(n.a)(Object(n.a)({},e.vehiclesParams),{},{page:e.vehiclesParams.page+1})),e.getVehicles(Object(n.a)(Object(n.a)({},e.vehiclesParams),{},{page:e.vehiclesParams.page+1})))},value:null==e.reportParamsData.vehicle_id?"":null===(Y=e.reportParamsData)||void 0===Y?void 0:Y.vehicle_id,children:e.miniVehiclesList.map((function(e,a){return Object(w.jsx)(Option,{value:e.id,children:e.vehicleno},a)}))})})}),Object(w.jsx)(c.a,{span:24,xs:24,md:10,xl:10,children:Object(w.jsx)(l.a.Item,{label:"Report Format",name:"file_format",rules:[{required:!0,message:"Please select Your Report Format!"}],children:Object(w.jsxs)(m.a.Group,{name:"file_format",onChange:function(a){e.InputChangeValue({key:a.target.name,value:a.target.value})},value:null===(S=e.reportParamsData)||void 0===S?void 0:S.file_format,children:[Object(w.jsx)(m.a.Button,{value:0,children:"CSV"}),Object(w.jsx)(m.a.Button,{value:2,children:"XLSX"}),Object(w.jsx)(m.a.Button,{value:5,children:"VIEW"})]})})})]}),Object(w.jsx)(o.a,{gutter:[12,12],children:Object(w.jsxs)(c.a,{md:12,offset:12,children:[Object(w.jsx)(h.a,{type:"secondary",className:"hp-submit-btn hp-float-right hp-mt-10 hp-ml-10",onClick:function(){e.clearData()},htmlType:"button",children:"Clear"}),Object(w.jsx)(h.a,{type:"primary",className:"hp-submit-btn hp-float-right hp-mt-10",disabled:e.loading,loading:e.loading,onClick:function(){I.submit()},children:"Generate Report"})]})})]})})}),Object(w.jsx)(c.a,{span:24,children:e.reportView&&Object(w.jsx)(w.Fragment,{children:0!=e.reportDataList.length&&5==e.reportParamsData.file_format?Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(u.a,{children:Object(w.jsx)(o.a,{className:"hp-mb-12",children:Object(w.jsx)(c.a,{span:24,children:Object(w.jsx)(b.a,{columns:F,dataSource:N,scroll:{x:500},pagination:!1,size:"middle",loading:e.loading})})})})}):Object(w.jsx)(u.a,{children:Object(w.jsx)(j.a,{className:"hp-m-32",image:P.a,imageStyle:{height:160},description:Object(w.jsx)("h5",{children:"Your Purchase Report is empty"})})})})})]})}))}}]);
//# sourceMappingURL=130.aef9f7a5.chunk.js.map